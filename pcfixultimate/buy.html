<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <title>PCFixUltimate â€” Ø´Ø±Ø§Ø¡ ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- PayPal JS SDK (Buttons) - LIVE -->
    <script
      src="https://www.paypal.com/sdk/js?client-id=AfihjAXTyDN5TqjgromFKBgDJb13HTB4SqlvZ9JusszBMBLCUxVJKBA8jz-ThHzl5Lhslp4rEvv-_Enc&currency=USD&intent=capture&components=buttons"
      data-sdk-integration-source="button-factory">
    </script>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap');

      :root{
        --bg-dark:#070a14;
        --bg-mid:#0c1020;
        --card:#0f172a;
        --card2:#0b1224;
        --border:rgba(148,163,184,.14);
        --border2:rgba(148,163,184,.22);

        --accent:#3b82f6;
        --accent2:#06b6d4;
        --accent3:#a855f7;

        --ok:#10b981;
        --err:#ef4444;
        --warn:#f59e0b;

        --text:#f8fafc;
        --muted:#94a3b8;
        --dim:#64748b;

        --shadow:0 30px 110px rgba(0,0,0,.65);
      }

      *{ box-sizing:border-box; margin:0; padding:0; }
      body{
        font-family:"Tajawal",system-ui,-apple-system,"Segoe UI",sans-serif;
        color:var(--text);
        min-height:100vh;
        background: #000;
        overflow-x:hidden;
      }

      /* background */
      .bg{
        position:fixed; inset:0;
        background:
          radial-gradient(800px 600px at 15% -10%, rgba(59,130,246,.22), transparent 60%),
          radial-gradient(700px 520px at 90% 110%, rgba(168,85,247,.18), transparent 60%),
          radial-gradient(600px 520px at 50% 50%, rgba(6,182,212,.10), transparent 65%),
          linear-gradient(135deg, var(--bg-mid), #000 55%, #000);
        z-index:0;
      }
      .bg::before{
        content:"";
        position:absolute; width:900px; height:900px; border-radius:50%;
        right:-300px; top:-450px;
        background: radial-gradient(circle, rgba(59,130,246,.35), transparent 60%);
        filter: blur(10px);
        opacity:.25;
        animation: float1 18s ease-in-out infinite;
      }
      .bg::after{
        content:"";
        position:absolute; width:780px; height:780px; border-radius:50%;
        left:-260px; bottom:-420px;
        background: radial-gradient(circle, rgba(168,85,247,.32), transparent 62%);
        filter: blur(12px);
        opacity:.22;
        animation: float2 22s ease-in-out infinite;
      }
      @keyframes float1{
        0%,100%{ transform: translate(0,0) scale(1); }
        50%{ transform: translate(-90px, 80px) scale(1.08); }
      }
      @keyframes float2{
        0%,100%{ transform: translate(0,0) scale(1); }
        50%{ transform: translate(110px, -70px) scale(1.10); }
      }

      main{
        position:relative;
        z-index:1;
        max-width:1240px;
        margin:0 auto;
        padding:38px 18px 60px;
      }

      header{
        text-align:center;
        margin-bottom:36px;
      }
      .logoWrap{ display:inline-flex; align-items:center; justify-content:center; margin-bottom:14px; }
      .logo{
        width:88px; height:88px; border-radius:26px;
        background: linear-gradient(145deg, rgba(30,41,59,.9), rgba(2,6,23,.9));
        border:1px solid rgba(148,163,184,.18);
        box-shadow: 0 18px 60px rgba(0,0,0,.75), 0 0 70px rgba(59,130,246,.18);
        display:flex; align-items:center; justify-content:center;
        position:relative;
        transform-style:preserve-3d;
        animation: logoFloat 3.4s ease-in-out infinite;
      }
      .logo::before{
        content:"";
        position:absolute; inset:-3px;
        border-radius:28px;
        background: linear-gradient(45deg, rgba(59,130,246,.65), rgba(6,182,212,.55), rgba(168,85,247,.55));
        filter: blur(18px);
        opacity:.55;
        z-index:-1;
        animation: spin 9s linear infinite;
      }
      @keyframes spin{ to{ transform: rotate(360deg); } }
      @keyframes logoFloat{
        0%,100%{ transform: translateY(0) rotateX(0) rotateY(0); }
        50%{ transform: translateY(-10px) rotateX(5deg) rotateY(4deg); }
      }
      .logo span{
        font-weight:900;
        font-size:2.1rem;
        background: linear-gradient(135deg, #93c5fd, #22d3ee);
        -webkit-background-clip:text;
        -webkit-text-fill-color:transparent;
      }

      h1{
        font-size:2.6rem;
        font-weight:900;
        letter-spacing:.2px;
      }
      .sub{
        margin-top:10px;
        color:var(--muted);
        font-size:1.06rem;
        line-height:1.7;
        max-width:680px;
        margin-left:auto; margin-right:auto;
      }
      .badge{
        display:inline-flex;
        align-items:center;
        gap:10px;
        margin-top:16px;
        padding:10px 18px;
        border-radius:999px;
        background: rgba(16,185,129,.08);
        border:1px solid rgba(16,185,129,.28);
        color: var(--ok);
        backdrop-filter: blur(10px);
        font-weight:700;
        font-size:.92rem;
      }
      .dot{
        width:9px; height:9px; border-radius:50%;
        background: var(--ok);
        box-shadow: 0 0 12px rgba(16,185,129,.55);
        animation:pulse 1.8s ease-in-out infinite;
      }
      @keyframes pulse{
        0%,100%{ transform:scale(1); opacity:1; }
        50%{ transform:scale(1.22); opacity:.7; }
      }

      .grid{
        display:grid;
        grid-template-columns: 1.15fr .85fr;
        gap:22px;
        align-items:start;
      }
      @media(max-width:1060px){
        .grid{ grid-template-columns: 1fr; }
      }

      .card{
        border-radius:28px;
        border:1px solid var(--border);
        background:
          radial-gradient(900px 300px at 15% 0%, rgba(59,130,246,.18), transparent 55%),
          radial-gradient(700px 260px at 100% 100%, rgba(6,182,212,.10), transparent 55%),
          linear-gradient(135deg, rgba(15,23,42,.88), rgba(2,6,23,.88));
        box-shadow: var(--shadow);
        padding:28px;
        position:relative;
        overflow:hidden;
      }
      .card.secondary{
        background:
          radial-gradient(900px 320px at 75% 0%, rgba(168,85,247,.16), transparent 55%),
          linear-gradient(135deg, rgba(11,18,36,.9), rgba(2,6,23,.9));
      }
      .cardTop{
        display:flex;
        align-items:center;
        gap:14px;
        margin-bottom:16px;
      }
      .step{
        width:46px; height:46px;
        border-radius:16px;
        display:flex; align-items:center; justify-content:center;
        background: linear-gradient(135deg, rgba(59,130,246,1), rgba(37,99,235,1));
        box-shadow: 0 14px 40px rgba(59,130,246,.33);
        font-weight:900;
        font-size:1.35rem;
      }
      .title{
        font-weight:800;
        font-size:1.45rem;
      }
      .hint{
        color:var(--muted);
        line-height:1.7;
        margin-bottom:18px;
      }
      .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }

      label{
        display:block;
        color:var(--muted);
        font-weight:700;
        font-size:.92rem;
        margin:10px 0 8px;
      }
      .row{
        display:flex;
        gap:12px;
        flex-wrap:wrap;
      }
      input[type="text"], input[type="email"]{
        flex:1;
        min-width:260px;
        padding:14px 16px;
        border-radius:14px;
        border:2px solid rgba(148,163,184,.18);
        background: rgba(2,6,23,.55);
        color:var(--text);
        font-size:.98rem;
        direction:ltr;
        transition:.22s ease;
      }
      input[type="email"]{ direction:ltr; }
      input:focus{
        outline:none;
        border-color: rgba(59,130,246,.75);
        box-shadow: 0 0 0 5px rgba(59,130,246,.12), 0 0 35px rgba(59,130,246,.18);
        background: rgba(2,6,23,.75);
      }
      input::placeholder{ color: var(--dim); }

      button{
        border:0;
        cursor:pointer;
        font-family:"Tajawal",sans-serif;
        font-weight:900;
        border-radius:14px;
        padding:14px 18px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        gap:10px;
        transition: transform .16s ease, box-shadow .16s ease, opacity .16s ease, background .16s ease;
        user-select:none;
      }
      button:disabled{ opacity:.55; cursor:not-allowed; transform:none!important; box-shadow:none!important; }

      .btnPrimary{
        background: linear-gradient(135deg, rgba(59,130,246,1), rgba(37,99,235,1));
        color:#fff;
        box-shadow: 0 14px 40px rgba(59,130,246,.34);
      }
      .btnPrimary:hover{ transform: translateY(-2px); box-shadow: 0 18px 55px rgba(59,130,246,.52); }
      .btnGhost{
        background: rgba(148,163,184,.08);
        color: var(--muted);
        border:1px solid rgba(148,163,184,.22);
        font-weight:800;
      }
      .btnGhost:hover{ background: rgba(148,163,184,.14); border-color: rgba(148,163,184,.35); }

      .priceBox{
        margin-top:18px;
        border-radius:20px;
        border:1px solid rgba(59,130,246,.22);
        background: linear-gradient(135deg, rgba(59,130,246,.10), rgba(168,85,247,.06));
        padding:18px 18px;
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:14px;
        flex-wrap:wrap;
      }
      .priceText .lbl{ color:var(--muted); font-size:.92rem; font-weight:700; }
      .priceText .amt{
        font-size:2.1rem;
        font-weight:900;
        background: linear-gradient(135deg, #93c5fd, #22d3ee);
        -webkit-background-clip:text;
        -webkit-text-fill-color:transparent;
      }
      .hashChip{
        display:flex;
        align-items:center;
        gap:10px;
        padding:10px 14px;
        border-radius:14px;
        border:1px dashed rgba(148,163,184,.22);
        background: rgba(2,6,23,.35);
        color:var(--muted);
        font-size:.88rem;
      }
      .hashChip b{ color:#93c5fd; font-weight:900; }

      .status{
        margin-top:16px;
        padding:14px 16px;
        border-radius:16px;
        background: rgba(2,6,23,.35);
        border:1px solid rgba(148,163,184,.12);
        display:flex;
        align-items:center;
        gap:10px;
        font-weight:700;
      }
      .statusDot{ width:10px; height:10px; border-radius:50%; background: var(--muted); }
      .status-ok{ border-color: rgba(16,185,129,.30); color: var(--ok); }
      .status-ok .statusDot{ background: var(--ok); box-shadow: 0 0 12px rgba(16,185,129,.5); }
      .status-err{ border-color: rgba(239,68,68,.30); color: var(--err); }
      .status-err .statusDot{ background: var(--err); box-shadow: 0 0 12px rgba(239,68,68,.45); }
      .status-pending{ border-color: rgba(245,158,11,.30); color: var(--warn); }
      .status-pending .statusDot{ background: var(--warn); box-shadow: 0 0 12px rgba(245,158,11,.45); animation:pulse 1.4s ease-in-out infinite; }

      .paypalBox{
        margin-top:18px;
        border-radius:20px;
        border:1px solid rgba(148,163,184,.18);
        background: rgba(2,6,23,.30);
        padding:18px;
      }
      .paypalHint{
        color:var(--muted);
        font-weight:700;
        margin-bottom:12px;
      }
      .warn{
        margin-top:12px;
        border-radius:14px;
        border:1px solid rgba(245,158,11,.22);
        background: rgba(245,158,11,.06);
        padding:12px 14px;
        color: var(--dim);
        line-height:1.7;
        font-size:.9rem;
      }

      .hidden{ display:none; }

      .licenseBox{
        border-radius:20px;
        border:2px solid rgba(16,185,129,.25);
        background: linear-gradient(135deg, rgba(16,185,129,.10), rgba(6,182,212,.06));
        padding:18px;
        margin-top:14px;
      }
      .codeRow{
        display:flex;
        gap:12px;
        align-items:center;
        flex-wrap:wrap;
        margin-top:10px;
      }
      .code{
        flex:1;
        min-width:220px;
        padding:14px 14px;
        border-radius:14px;
        border:2px solid rgba(16,185,129,.30);
        background: rgba(2,6,23,.55);
        color: var(--ok);
        font-weight:900;
        letter-spacing:.06em;
        font-size:1.12rem;
        text-align:center;
        font-family: ui-monospace, Menlo, Consolas, monospace;
      }

      .steps{
        margin-top:14px;
        border-radius:16px;
        border:1px dashed rgba(148,163,184,.20);
        background: rgba(2,6,23,.25);
        padding:14px 16px;
        color: var(--muted);
        line-height:1.9;
        font-size:.95rem;
      }
      .steps strong{ color: var(--text); }

      /* Download section */
      .downloadCard{
        margin-top:18px;
        border-radius:20px;
        border:1px solid rgba(59,130,246,.22);
        background: linear-gradient(135deg, rgba(59,130,246,.10), rgba(6,182,212,.05));
        padding:16px;
      }
      .downloadTop{
        display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
      }
      .downloadTop .dlTitle{
        font-weight:900;
        font-size:1.05rem;
      }
      .downloadTop .dlMeta{
        color: var(--muted);
        font-size:.9rem;
        margin-top:4px;
        line-height:1.6;
      }

      .footer{
        margin-top:28px;
        text-align:center;
        color: var(--muted);
        line-height:1.8;
        border-radius:22px;
        border:1px solid rgba(148,163,184,.12);
        background: rgba(2,6,23,.22);
        padding:18px;
      }

      @media(max-width:780px){
        h1{ font-size:2.05rem; }
        .card{ padding:22px; }
      }
    </style>
  </head>

  <body>
    <div class="bg"></div>

    <main>
      <header>
        <div class="logoWrap">
          <div class="logo"><span>PF</span></div>
        </div>
        <h1>PCFixUltimate</h1>
        <p class="sub">
          ØªØ±Ø®ÙŠØµ Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø© Ù„Ø¬Ù‡Ø§Ø² ÙˆØ§Ø­Ø¯ + ÙƒÙˆØ¯ ØªÙØ¹ÙŠÙ„ Ù…Ø±ØªØ¨Ø· Ø¨Ø¨ØµÙ…Ø© Ø¬Ù‡Ø§Ø²Ùƒ.<br/>
          Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹ Ø³ÙŠØ¸Ù‡Ø± ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ ÙÙˆØ±Ø§Ù‹ â€” ÙˆÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ø§Ù‹ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ù„ØªØ³Ø¬ÙŠÙ„Ù‡ Ù…Ø¹ Ø§Ù„Ø·Ù„Ø¨.
        </p>
        <div class="badge">
          <span class="dot"></span>
          <span>Ø¯ÙØ¹ Ø¢Ù…Ù† Ø¹Ø¨Ø± PayPal</span>
        </div>
      </header>

      <div class="grid">
        <!-- LEFT: Step 1 -->
        <section class="card">
          <div class="cardTop">
            <div class="step">Ù¡</div>
            <div class="title">Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙØ¹ÙŠÙ„</div>
          </div>

          <p class="hint">
            Ø§Ù„ØµÙ‚ <span class="mono">Machine Hash</span> Ù…Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬. (Ø¥Ø°Ø§ ÙØªØ­Øª Ø§Ù„ØµÙØ­Ø© Ù…Ù† Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ ØºØ§Ù„Ø¨Ø§Ù‹ ØªØ¬ÙŠÙƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ø¨Ø±
            <span class="mono">buy.html?mh=...</span>)
          </p>

          <label for="mh_input">Ø¨ØµÙ…Ø© Ø§Ù„Ø¬Ù‡Ø§Ø² (Machine Hash)</label>
          <div class="row">
            <input id="mh_input" type="text" placeholder="Ù…Ø«Ø§Ù„: 81e80f3e97a4b5c6d..." />
            <button id="btn_use_mh" type="button" class="btnPrimary">Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ØµÙ…Ø©</button>
          </div>

          <label for="email_input">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ â€” Ù„Ø­ÙØ¸Ù‡ Ù…Ø¹ Ø§Ù„Ø·Ù„Ø¨)</label>
          <div class="row">
            <input id="email_input" type="email" placeholder="name@example.com" />
            <button id="btn_use_email" type="button" class="btnGhost">ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¨Ø±ÙŠØ¯</button>
          </div>

          <div class="priceBox">
            <div class="priceText">
              <div class="lbl">Ø§Ù„Ø³Ø¹Ø±</div>
              <div><span class="amt">$16.99</span> <span class="mono" style="color:var(--muted);font-weight:800;">USD</span></div>
              <div style="color:var(--dim);margin-top:4px;font-weight:700;">Ø¬Ù‡Ø§Ø² ÙˆØ§Ø­Ø¯ â€” Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©</div>
            </div>
            <div class="hashChip">
              <span>Hash:</span>
              <b id="mh">â€”</b>
            </div>
          </div>

          <div id="status" class="status">
            <span class="statusDot"></span>
            <span>Ø£Ø¯Ø®Ù„ Ø¨ØµÙ…Ø© Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¯ÙØ¹.</span>
          </div>

          <div class="paypalBox">
            <div class="paypalHint">Ø²Ø± Ø§Ù„Ø¯ÙØ¹ ÙŠØ¸Ù‡Ø± Ø¨Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ØµÙ…Ø© ØµØ­ÙŠØ­Ø©:</div>
            <div id="paypal-buttons"></div>

            <div class="warn">
              <b style="color:var(--warn);">Ù…Ù„Ø§Ø­Ø¸Ø©:</b>
              Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¯ÙØ¹ ÙˆØ¥ØµØ¯Ø§Ø± Ø§Ù„ØªØ±Ø®ÙŠØµ ÙŠØªÙ… Ø¹Ø¨Ø± Worker (Server-side) Ù„Ø£Ù† Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØ­ØªØ§Ø¬ Ø£Ø³Ø±Ø§Ø± PayPal.
            </div>
          </div>

          <!-- Download -->
          <div class="downloadCard">
            <div class="downloadTop">
              <div>
                <div class="dlTitle">ØªØ­Ù…ÙŠÙ„ Ø¢Ø®Ø± Ø¥ØµØ¯Ø§Ø± Ù…Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</div>
                <div class="dlMeta" id="dl_meta">
                  Ø§Ø¶ØºØ· Ù„Ù„ØªØ­Ù…ÙŠÙ„. (ÙŠÙØ¶Ù„ ØªÙˆÙØ± Ø±Ø§Ø¨Ø· Ø«Ø§Ø¨Øª â€œlatestâ€ Ø¹Ù†Ø¯Ùƒ Ø¹Ø¨Ø± Worker/Storage)
                </div>
              </div>
              <a id="btn_download" class="btnPrimary" style="text-decoration:none;" href="#" download>
                â¬‡ï¸ ØªØ­Ù…ÙŠÙ„ Ø¢Ø®Ø± Ù†Ø³Ø®Ø©
              </a>
            </div>
          </div>
        </section>

        <!-- RIGHT: Step 2 -->
        <section class="card secondary">
          <div class="cardTop">
            <div class="step" style="background:linear-gradient(135deg, rgba(168,85,247,1), rgba(59,130,246,1)); box-shadow:0 14px 40px rgba(168,85,247,.25);">Ù¢</div>
            <div class="title">ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„</div>
          </div>

          <p class="hint">
            Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹ Ù…Ø¨Ø§Ø´Ø±Ø© ÙŠØ¸Ù‡Ø± ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ù‡Ù†Ø§.
          </p>

          <div id="license_block" class="hidden">
            <div class="licenseBox">
              <div style="color:var(--muted);font-weight:800;">Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚ØµÙŠØ± Ù„Ø¬Ù‡Ø§Ø²Ùƒ:</div>
              <div class="codeRow">
                <div id="short_code" class="code">PCFX-XXXXXXXX</div>
                <button type="button" id="btn_copy" class="btnPrimary">ğŸ“‹ Ù†Ø³Ø®</button>
              </div>
            </div>

            <div class="steps">
              <div style="font-weight:900;margin-bottom:6px;">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬:</div>
              <ol style="padding-right:18px;">
                <li>Ø§ÙØªØ­ <strong>PCFixUltimate</strong> ÙˆØ§Ø®ØªØ± <strong>Activate Program</strong>.</li>
                <li>Ø§Ù„ØµÙ‚ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ø®Ø§Ù†Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„.</li>
                <li>Ø§Ø¶ØºØ· ØªÙØ¹ÙŠÙ„ ÙˆØ³ØªØ¸Ù‡Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­.</li>
              </ol>
            </div>
          </div>

          <div id="empty_hint" class="steps" style="border-style:solid;border-color:rgba(148,163,184,.12);">
            Ù„Ù… ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØªØ±Ø®ÙŠØµ Ø¨Ø¹Ø¯. Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± PayPal ÙˆØ³ÙŠØ¸Ù‡Ø± Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.
          </div>

          <button type="button" id="btn_clear" class="btnGhost" style="margin-top:14px;width:100%;">
            ğŸ”„ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯
          </button>
        </section>
      </div>

      <div class="footer">
        Ø§Ù„ØªØ±Ø®ÙŠØµ Ù…Ø±ØªØ¨Ø· Ø¨Ø¨ØµÙ…Ø© Ø¬Ù‡Ø§Ø² ÙˆØ§Ø­Ø¯. Ø¥Ø°Ø§ ØµØ§Ø± ÙÙˆØ±Ù…Ø§ØªØŒ Ø§Ø³ØªØ®Ø¯Ù… Ù†ÙØ³ <span class="mono">machine hash</span> Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„.
      </div>
    </main>

    <script>
      // =======================
      // Worker endpoints
      // =======================
      const API_BASE = "https://pcfix-license-api.pcfixultimate.workers.dev";
      const CREATE_ORDER_ENDPOINT = `${API_BASE}/paypal/create-order`;
      const CAPTURE_ORDER_ENDPOINT = `${API_BASE}/paypal/capture-order`;
      const CLAIM_LICENSE_ENDPOINT = `${API_BASE}/claim-license`;

      // Price must be enforced on server too.
      const PRICE_USD = "16.99";

      // âœ… Put your real latest download URL here (R2 / GitHub Releases / Worker redirect)
      // Example (Worker redirect): https://pcfix-license-api.pcfixultimate.workers.dev/download/latest
      const DOWNLOAD_URL = "https://pcfix-license-api.pcfixultimate.workers.dev/download/latest";

      const $ = (id) => document.getElementById(id);

      function setStatus(text, mode = "info") {
        const el = $("status");
        el.classList.remove("status-ok","status-err","status-pending");
        if (mode === "ok") el.classList.add("status-ok");
        else if (mode === "err") el.classList.add("status-err");
        else if (mode === "pending") el.classList.add("status-pending");
        el.querySelector(".statusDot").style.opacity = "1";
        el.lastElementChild.textContent = text;
      }

      function mhValue() { return ($("mh_input").value || "").trim(); }
      function emailValue() { return ($("email_input").value || "").trim(); }

      function isMhValid(mh) { return /^[a-f0-9]{32,128}$/i.test(mh); }
      function isEmailValid(em) {
        if (!em) return true; // optional
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(em);
      }

      function showLicense(code, mh) {
        $("empty_hint").classList.add("hidden");
        $("license_block").classList.remove("hidden");
        $("short_code").textContent = code || "PCFX-XXXXXXXX";
        if (mh) {
          $("mh").textContent = mh;
          if (!$("mh_input").value) $("mh_input").value = mh;
        }
      }

      async function claimLicense(orderId, mh, email) {
        setStatus("Ø¬Ø§Ø±ÙŠ Ø¥ØµØ¯Ø§Ø± ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„â€¦", "pending");
        const res = await fetch(CLAIM_LICENSE_ENDPOINT, {
          method: "POST",
          headers: { "Content-Type":"application/json" },
          body: JSON.stringify({
            order_id: orderId,
            machine_hash: mh,
            customer_email: email || "" // optional: store it server-side
          })
        });
        const data = await res.json().catch(()=> ({}));
        if (!res.ok || !data.short_code) {
          throw new Error(data?.error || "ØªØ¹Ø°Ø± Ø¥ØµØ¯Ø§Ø± ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„. ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù….");
        }
        showLicense(data.short_code, data.machine_hash || mh);
        setStatus("âœ“ ØªÙ… Ø§Ù„Ø¯ÙØ¹ ÙˆØ¥ØµØ¯Ø§Ø± ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­", "ok");
      }

      function renderPaypalButtons() {
        const mh = mhValue();
        const em = emailValue();

        if (!isMhValid(mh)) {
          setStatus("Ø£Ø¯Ø®Ù„ Ø¨ØµÙ…Ø© Ø¬Ù‡Ø§Ø² ØµØ­ÙŠØ­Ø© Ø£ÙˆÙ„Ø§Ù‹.", "err");
          return;
        }
        if (!isEmailValid(em)) {
          setStatus("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­ (Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹).", "err");
          return;
        }

        $("mh").textContent = mh;
        $("paypal-buttons").innerHTML = "";

        paypal.Buttons({
          style: { layout: "vertical", label: "paypal" },

          // Create order on server (recommended pattern)
          createOrder: async () => {
            setStatus("Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø§Ù„Ø¯ÙØ¹â€¦", "pending");
            const res = await fetch(CREATE_ORDER_ENDPOINT, {
              method: "POST",
              headers: { "Content-Type":"application/json" },
              body: JSON.stringify({
                machine_hash: mh,
                amount: PRICE_USD,
                currency: "USD",
                customer_email: em || "" // optional: store with order
              })
            });
            const data = await res.json().catch(()=> ({}));
            if (!res.ok || !data.id) {
              throw new Error(data?.error || "ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ PayPal.");
            }
            return data.id; // orderID
          },

          onApprove: async (data) => {
            try {
              setStatus("Ø¬Ø§Ø±ÙŠ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹â€¦", "pending");
              const res = await fetch(CAPTURE_ORDER_ENDPOINT, {
                method: "POST",
                headers: { "Content-Type":"application/json" },
                body: JSON.stringify({ order_id: data.orderID })
              });
              const cap = await res.json().catch(()=> ({}));
              if (!res.ok || !cap.ok) {
                throw new Error(cap?.error || "ÙØ´Ù„ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹ (Capture).");
              }

              // claim license (and optionally store email)
              await claimLicense(data.orderID, mh, em);
            } catch (e) {
              console.error(e);
              setStatus("Ø­ØµÙ„ Ø®Ø·Ø£ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹: " + (e?.message || e), "err");
            }
          },

          onCancel: () => setStatus("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹.", "err"),
          onError: (err) => {
            console.error(err);
            setStatus("Ø®Ø·Ø£ ÙÙŠ PayPal: " + (err?.message || err), "err");
          }
        }).render("#paypal-buttons");

        setStatus("âœ“ Ø²Ø± PayPal Ø¬Ø§Ù‡Ø² â€” Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¯ÙØ¹.", "ok");
      }

      function applyDownloadLink() {
        const a = $("btn_download");
        a.href = DOWNLOAD_URL;
        // optional: show the URL as metadata
        $("dl_meta").textContent = "Ø³ÙŠØ¨Ø¯Ø£ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·. Ø¥Ø°Ø§ Ù…Ø§ Ø¨Ø¯Ø£ØŒ ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­ ÙˆÙ…ØªØ§Ø­.";
      }

      $("btn_use_mh").addEventListener("click", () => {
        const mh = mhValue();
        if (!isMhValid(mh)) {
          setStatus("Ø§Ù„Ø¨ØµÙ…Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©. Ø§Ù„ØµÙ‚ Ù‚ÙŠÙ…Ø© mh ÙƒÙ…Ø§ Ù‡ÙŠ Ù…Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬.", "err");
          return;
        }
        $("mh").textContent = mh;
        $("license_block").classList.add("hidden");
        $("empty_hint").classList.remove("hidden");
        renderPaypalButtons();
      });

      $("btn_use_email").addEventListener("click", () => {
        const em = emailValue();
        if (!isEmailValid(em)) {
          setStatus("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­ (Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹).", "err");
          return;
        }
        setStatus(em ? "âœ“ ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆØ³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡ Ù…Ø¹ Ø§Ù„Ø·Ù„Ø¨." : "ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¨Ø±ÙŠØ¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ).", "ok");
      });

      $("btn_clear").addEventListener("click", () => {
        $("mh_input").value = "";
        $("email_input").value = "";
        $("mh").textContent = "â€”";
        $("paypal-buttons").innerHTML = "";
        $("license_block").classList.add("hidden");
        $("empty_hint").classList.remove("hidden");
        setStatus("Ø£Ø¯Ø®Ù„ Ø¨ØµÙ…Ø© Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¯ÙØ¹.", "info");
      });

      $("btn_copy").addEventListener("click", () => {
        const code = $("short_code").textContent || "";
        if (!code) return setStatus("Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙƒÙˆØ¯ Ù„Ù†Ø³Ø®Ù‡ Ø­Ø§Ù„ÙŠØ§Ù‹.", "err");
        navigator.clipboard.writeText(code)
          .then(() => setStatus("âœ“ ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯.", "ok"))
          .catch((e) => setStatus("ØªØ¹Ø°Ø± Ø§Ù„Ù†Ø³Ø®: " + (e?.message || e), "err"));
      });

      document.addEventListener("DOMContentLoaded", () => {
        applyDownloadLink();

        const params = new URLSearchParams(location.search);
        const mh = (params.get("mh") || params.get("machine_hash") || "").trim();
        const em = (params.get("email") || "").trim();

        if (mh) {
          $("mh_input").value = mh;
          $("mh").textContent = mh;
        }
        if (em) $("email_input").value = em;

        if (mh && isMhValid(mh)) renderPaypalButtons();
      });
    </script>
  </body>
</html>
